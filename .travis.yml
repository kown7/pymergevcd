language: python

# Required for Python 3.7+.
#   See: https://github.com/travis-ci/travis-ci/issues/9069#issuecomment-425720905
dist: xenial
stages:
  - test
  - deploy

matrix:
    include:
        - python: 3.6
          env: TOXENV=py36
        - python: 3.7
          env: TOXENV=py37
        - python: 3.8
          env: TOXENV=py38,reqs
        - python: 3.8
          env: TOXENV=pep8,mypy
        - python: 3.8
          env: TOXENV=docs

before_install:
       - sudo apt-get -y install graphviz gnuplot-nox ghostscript
       - sudo apt-get -y install lmodern
       - sudo apt-get -y install latexmk texlive texlive-latex-extra texlive-generic-extra texlive-xetex 
       - sudo apt-get -y install texlive-font-utils texlive-fonts-recommended texlive-fonts-extra

install:
  # Ensure virtualenv is up to date to avoid DeprecationWarning in bundled site.py.
  - pip install --upgrade virtualenv
  - pip install tox

script:
  tox

notifications:
  email: false

deploy:
  provider: pypi
  username: "__token__"
  password:
     secure: R1Dc1s3bkak8Qn8kGu6v6o36PmjyApcXej71sdrQDYv86gPZUcKDLEcP3BJRqnbySvoKUz9pr5zwcKFmfdm58rP2Eb24yFyhrKXJiIf6zRK2n3+UMGkNgNukvY/6v0/95BRqlm5qfPl5bpgzCCN+OVxs51BWSSZaK46y/vhStZXeUBqDPliguHyHXTCKTLZM/0ug8TXBGuh4jG/lV/3n9PRtrUzwvYEhsSvetH47jpVaWTSN30cPtrNqA9dcFwFVnjOcliV3ttU1vlmLGBaZEQ5/g1I1ZRD+yctBadtVK9fnAK3iui1egre92LT9EeJbjbGa+3uHg4XoXNDFojxiKmvhu3ddYXr3DOd3vomD8Y+B7oNhSZvdmTknRC/MITMvQEs5T9O2E9kHMPrSxKHrB7AIASp67YGtqupPU7uyhiErVj20MEmUXuWLZnhQhi+bGaCIyI+4vcZqDsP+N2yP33GIC2xAgUJTZOHduXj0dsayVS/TUll4BoI6EyHs8J2ItzPxpV62hHYOr2zcwOWbWZ7KfLks1ScuYBSLdDA3hyZ7sZBGgoOkyZmNWsKVXPoFdgFo55lMrCs2LOXOSC1CESW5kbLuKYtdU3Vi0lT/9Hrdvygq3909XmXsbeAt/QoJqsqVw+uwgU46aadlpduwkp/OClfBgFCdtjFLWRjKUhM=
  distributions: "sdist bdist_wheel"
  on:
    tags: true
    python: 3.6

